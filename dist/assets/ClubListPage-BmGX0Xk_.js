import{c as y,r as g,j as e,U as w,C as j,L as k,B as i,a as f,f as v}from"./index-B1TKH03G.js";import{I as c}from"./input-CCyB3kA2.js";import{u as N}from"./useClubStore-Dc6iDVhX.js";import{C,a as U,d as S,e as E}from"./card-yrt95q4Q.js";import{D,a as L,b as A,c as I,C as T}from"./ShareModal-CNKdFKbW.js";import{C as z}from"./check-D4-FbOjS.js";import{E as F}from"./EventCard-8KgUZ8k2.js";import{S as O}from"./search-VCfrvYJp.js";import{F as R}from"./filter-Xg0ROrOg.js";import"./badge-CpBV-KiU.js";import"./video-Dvf87XYw.js";import"./map-pin-C1CkJR1H.js";import"./clock-Cew70h3k.js";import"./share-2-BHjpIwdU.js";/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M=y("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=y("Layout",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["line",{x1:"3",x2:"21",y1:"9",y2:"9",key:"1vqk6q"}],["line",{x1:"9",x2:"9",y1:"21",y2:"9",key:"wpwpyp"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=y("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),B=({club:t})=>{const[d,n]=g.useState(!1);return e.jsxs(C,{className:"overflow-hidden hover:shadow-md transition-all duration-300 group h-full flex flex-col border-gray-200 dark:border-gray-800 bg-white dark:bg-gray-800",children:[e.jsxs("div",{className:"h-32 bg-gray-200 dark:bg-gray-900 relative overflow-hidden",children:[t.coverUrl&&!d?e.jsx("img",{src:t.coverUrl,alt:t.name,className:"w-full h-full object-cover transition-transform group-hover:scale-105",onError:()=>n(!0)}):e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-blue-500 to-purple-600"}),t.logoUrl&&e.jsx("div",{className:"absolute -bottom-6 left-4 h-12 w-12 rounded-lg border-2 border-white dark:border-gray-800 bg-white dark:bg-gray-800 overflow-hidden shadow-sm",children:e.jsx("img",{src:t.logoUrl,alt:"Logo",className:"w-full h-full object-cover"})}),e.jsx("div",{className:"absolute top-2 right-2 bg-white/90 dark:bg-gray-900/90 backdrop-blur-sm px-2 py-1 rounded text-xs font-bold text-gray-700 dark:text-gray-300 shadow-sm border border-white/20 dark:border-gray-700/50",children:t.category})]}),e.jsx(U,{className:"pt-8 pb-2 px-4",children:e.jsx("h3",{className:"font-bold text-lg leading-tight text-gray-900 dark:text-gray-100 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors line-clamp-1",children:t.name})}),e.jsxs(S,{className:"px-4 pb-4 flex-1",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 line-clamp-2 mb-3 h-10",children:t.description}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500 dark:text-gray-400",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(w,{className:"h-3.5 w-3.5"}),e.jsxs("span",{children:[t.members.length," membres"]})]}),t.events.length>0&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(j,{className:"h-3.5 w-3.5"}),e.jsxs("span",{children:[t.events.length," événements"]})]})]})]}),e.jsx(E,{className:"px-4 pb-4 pt-0",children:e.jsx(k,{to:`/clubs/${t.id}`,className:"w-full",children:e.jsx(i,{variant:"outline",className:"w-full text-blue-600 dark:text-blue-400 border-blue-200 dark:border-blue-900/50 hover:bg-blue-50 dark:hover:bg-blue-900/20 hover:border-blue-300 dark:hover:border-blue-800 bg-transparent",children:"Voir les détails"})})})]})},H=({isOpen:t,onClose:d})=>{const{createClub:n}=N(),{user:x}=f(),[l,m]=g.useState(1),[r,o]=g.useState({name:"",description:"",category:"Tech",logoUrl:"",coverUrl:"",website:"",contactEmail:""}),h=["Tech","Sport","Art","Academic","Social","Gaming"],b=()=>m(a=>Math.min(a+1,3)),u=()=>m(a=>Math.max(a-1,1)),p=()=>{if(!x)return;const a={id:Date.now().toString(),name:r.name,description:r.description,category:r.category,logoUrl:r.logoUrl,coverUrl:r.coverUrl||"https://images.unsplash.com/photo-1517048676732-d65bc937f952?auto=format&fit=crop&q=80&w=1200&h=400",contactEmail:r.contactEmail||x.email,website:r.website,createdAt:new Date().toISOString(),members:[{user:x,role:"admin",joinedAt:new Date().toISOString()}],events:[],posts:[]};n(a),d(),m(1),o({name:"",description:"",category:"Tech",logoUrl:"",coverUrl:"",website:"",contactEmail:""})},s=r.name.length>3&&r.description.length>10;return e.jsx(D,{open:t,onOpenChange:a=>!a&&d(),children:e.jsxs(L,{className:"max-w-2xl",children:[e.jsx(A,{children:e.jsx(I,{children:"Créer un nouveau club"})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between px-8 mb-8 relative",children:[e.jsx("div",{className:"absolute left-0 right-0 top-1/2 h-0.5 bg-gray-100 -z-10"}),[1,2,3].map(a=>e.jsx("div",{className:v("w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold transition-colors border-2 bg-white",l>=a?"border-blue-600 text-blue-600":"border-gray-200 text-gray-400",l>a&&"bg-blue-600 text-white border-blue-600"),children:l>a?e.jsx(z,{className:"h-4 w-4"}):a},a))]}),e.jsxs("div",{className:"min-h-[300px] px-2",children:[l===1&&e.jsxs("div",{className:"space-y-4 animate-in fade-in slide-in-from-right-4 duration-300",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Nom du club"}),e.jsx(c,{placeholder:"Ex: Club Robotique",value:r.name,onChange:a=>o({...r,name:a.target.value}),autoFocus:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Description courte"}),e.jsx("textarea",{className:"w-full rounded-lg border border-gray-200 p-3 text-sm focus:ring-2 focus:ring-blue-100 outline-none min-h-[100px]",placeholder:"Décrivez l'objectif de votre club...",value:r.description,onChange:a=>o({...r,description:a.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Catégorie"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:h.map(a=>e.jsx("button",{onClick:()=>o({...r,category:a}),className:v("px-3 py-2 rounded-lg text-sm border transition-all",r.category===a?"bg-blue-50 border-blue-200 text-blue-700 font-semibold":"border-gray-200 hover:bg-gray-50 text-gray-600"),children:a},a))})]})]}),l===2&&e.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-right-4 duration-300",children:[e.jsxs("div",{className:"p-4 bg-gray-50 rounded-xl border border-dashed border-gray-200 text-center space-y-2",children:[e.jsx("div",{className:"mx-auto w-12 h-12 bg-white rounded-full shadow-sm flex items-center justify-center text-blue-500",children:e.jsx(q,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold",children:"Image de couverture"}),e.jsx("p",{className:"text-xs text-gray-500 mb-3",children:"Recommandé: 1200x400px"}),e.jsx(c,{placeholder:"https://...",value:r.coverUrl,onChange:a=>o({...r,coverUrl:a.target.value}),className:"bg-white"})]}),r.coverUrl&&e.jsx("img",{src:r.coverUrl,className:"w-full h-32 object-cover rounded-lg mt-2 shadow-sm"})]}),e.jsxs("div",{className:"p-4 bg-gray-50 rounded-xl border border-dashed border-gray-200 text-center space-y-2",children:[e.jsx("div",{className:"mx-auto w-12 h-12 bg-white rounded-full shadow-sm flex items-center justify-center text-purple-500",children:e.jsx(V,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold",children:"Logo du club"}),e.jsx("p",{className:"text-xs text-gray-500 mb-3",children:"Carré (400x400px)"}),e.jsx(c,{placeholder:"https://...",value:r.logoUrl,onChange:a=>o({...r,logoUrl:a.target.value}),className:"bg-white"})]})]})]}),l===3&&e.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-right-4 duration-300",children:[e.jsxs("div",{className:"bg-gray-50 p-6 rounded-2xl border border-gray-100",children:[e.jsx("h3",{className:"font-bold text-xl text-gray-900 mb-1",children:r.name}),e.jsx("span",{className:"text-xs font-bold px-2 py-0.5 bg-blue-100 text-blue-700 rounded-full",children:r.category}),e.jsx("p",{className:"mt-3 text-sm text-gray-600 leading-relaxed",children:r.description}),e.jsxs("div",{className:"mt-6 space-y-2",children:[e.jsx(c,{placeholder:"Site web (optionnel)",value:r.website,onChange:a=>o({...r,website:a.target.value}),className:"bg-white"}),e.jsx(c,{placeholder:"Email de contact",value:r.contactEmail,onChange:a=>o({...r,contactEmail:a.target.value}),className:"bg-white"})]})]}),e.jsx("div",{className:"bg-yellow-50 p-4 rounded-xl border border-yellow-100 text-sm text-yellow-800",children:"En créant ce club, vous acceptez d'en être l'administrateur responsable et de respecter la charte de la vie associative."})]})]}),e.jsxs("div",{className:"flex justify-between pt-6 border-t mt-4",children:[e.jsxs(i,{variant:"ghost",onClick:u,disabled:l===1,className:"text-gray-500",children:[e.jsx(M,{className:"h-4 w-4 mr-1"}),"Retour"]}),l<3?e.jsxs(i,{onClick:b,disabled:l===1&&!s,className:"bg-gray-900 hover:bg-black text-white px-6 rounded-full",children:["Suivant",e.jsx(T,{className:"h-4 w-4 ml-1"})]}):e.jsx(i,{onClick:p,className:"bg-blue-600 hover:bg-blue-700 text-white px-8 rounded-full shadow-lg shadow-blue-200",children:"Créer le club"})]})]})]})})},se=()=>{const{clubs:t,filters:d,setFilter:n,getFilteredClubs:x,fetchClubs:l,isLoading:m}=N(),{user:r}=f(),[o,h]=g.useState(!1),b=x();g.useEffect(()=>{l(r==null?void 0:r.id)},[r==null?void 0:r.id]);const u=["all","Tech","Sport","Art","Academic"],p=t.flatMap(s=>(s.events||[]).map(a=>({...a,clubName:s.name}))).filter(s=>new Date(s.date)>new Date).sort((s,a)=>new Date(s.date).getTime()-new Date(a.date).getTime());return e.jsxs("div",{className:"max-w-7xl mx-auto space-y-8 pb-10",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:"Vie Associative"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:"Découvrez et rejoignez les clubs de l'université."})]}),e.jsx(i,{onClick:()=>h(!0),className:"bg-blue-600 hover:bg-blue-700",children:"Créer un club"})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 flex flex-col md:flex-row gap-4 items-center transition-colors",children:[e.jsxs("div",{className:"relative flex-1 w-full",children:[e.jsx(O,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400 dark:text-gray-500"}),e.jsx(c,{placeholder:"Rechercher un club...",className:"pl-9 bg-gray-50 dark:bg-gray-900 border-transparent focus:bg-white dark:focus:bg-gray-800 dark:text-gray-100 placeholder:text-gray-400 dark:placeholder:text-gray-500 transition-all border-none",value:d.search,onChange:s=>n("search",s.target.value)})]}),e.jsx("div",{className:"flex gap-2 w-full md:w-auto overflow-x-auto pb-2 md:pb-0 scrollbar-hide",children:u.map(s=>e.jsx(i,{variant:d.category===s?"default":"ghost",size:"sm",onClick:()=>n("category",s),className:d.category===s?"bg-gray-900 dark:bg-gray-100 text-white dark:text-gray-900 hover:bg-gray-800 dark:hover:bg-gray-200":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700",children:s==="all"?"Tous":s},s))})]}),m?e.jsx("div",{className:"min-h-[200px] flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):b.length>0?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:b.map(s=>e.jsx(B,{club:s},s.id))}):e.jsxs("div",{className:"text-center py-20 bg-gray-50 dark:bg-gray-800/50 rounded-xl border border-dashed border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-full inline-block shadow-sm mb-4",children:e.jsx(R,{className:"h-8 w-8 text-gray-400 dark:text-gray-500"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100",children:"Aucun club trouvé"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Essayez de modifier vos filtres de recherche."})]}),e.jsxs("div",{className:"space-y-4 pt-8 border-t border-gray-200 dark:border-gray-800",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2 text-gray-900 dark:text-gray-100",children:[e.jsx("span",{className:"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 p-1.5 rounded-lg",children:e.jsx(j,{className:"h-5 w-5"})}),"Événements à venir"]}),e.jsx(i,{variant:"link",className:"text-blue-600",children:"Voir tout"})]}),e.jsx("div",{className:"flex gap-4 overflow-x-auto pb-4 scrollbar-hide -mx-4 px-4",children:p.map(s=>e.jsx("div",{className:"min-w-[300px] md:min-w-[350px]",children:e.jsx(F,{event:s,clubName:s.clubName})},s.id))})]}),e.jsx(H,{isOpen:o,onClose:()=>h(!1)})]})};export{se as ClubListPage};
