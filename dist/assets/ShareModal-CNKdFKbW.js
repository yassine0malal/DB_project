import{c as g,j as r,r as u,f as p,m as k,a as $,M as S,B as m}from"./index-B1TKH03G.js";import{C as E}from"./check-D4-FbOjS.js";/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x=g("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C=g("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]),a="http://localhost:3000/api",L={getUser:async t=>{const e=await fetch(`${a}/users/${t}`);if(!e.ok)throw new Error("Failed to fetch user");const s=await e.json(),n={id:s.id,email:s.email,firstName:s.first_name,lastName:s.last_name,role:s.role,avatarUrl:s.avatar_url,coverUrl:s.cover_url,bio:s.bio,...s};return typeof n.skills=="string"&&(n.skills=JSON.parse(n.skills)),typeof n.interests=="string"&&(n.interests=JSON.parse(n.interests)),n},updateUser:async(t,e)=>{const s={first_name:e.firstName,last_name:e.lastName,bio:e.bio,avatar_url:e.avatarUrl,cover_url:e.coverUrl},n=await fetch(`${a}/users/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!n.ok)throw new Error("Failed to update user");return n.json()},updateUserDetails:async(t,e,s,n)=>{const l=await fetch(`${a}/users/${t}/details`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({role:e,details:s,social:n})});if(!l.ok)throw new Error("Failed to update details");return l.json()},getPosts:async t=>{const e=t?`?viewerId=${t}`:"",s=await fetch(`${a}/posts${e}`);if(!s.ok)throw new Error("Failed to fetch posts");return s.json()},createPost:async t=>{const e=await fetch(`${a}/posts`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok)throw new Error("Failed to create post");return e.json()},toggleLike:async(t,e)=>{const s=await fetch(`${a}/posts/${t}/like`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e})});if(!s.ok)throw new Error("Failed to toggle like");return s.json()},createComment:async(t,e,s)=>{const n=await fetch(`${a}/posts/${t}/comments`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e,content:s})});if(!n.ok)throw new Error("Failed to create comment");return n.json()},getClubs:async t=>{const e=t?`?viewerId=${t}`:"",s=await fetch(`${a}/clubs${e}`);if(!s.ok)throw new Error("Failed to fetch clubs");return s.json()},getClub:async(t,e)=>{const s=e?`?viewerId=${e}`:"",n=await fetch(`${a}/clubs/${t}${s}`);if(!n.ok)throw new Error("Failed to fetch club");return n.json()},joinClub:async(t,e)=>{const s=await fetch(`${a}/clubs/${t}/join`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e})});if(!s.ok)throw new Error("Failed to join club");return s.json()},leaveClub:async(t,e)=>{const s=await fetch(`${a}/clubs/${t}/leave`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e})});if(!s.ok)throw new Error("Failed to leave club");return s.json()},getEvents:async t=>{const e=t?`?viewerId=${t}`:"",s=await fetch(`${a}/events${e}`);if(!s.ok)throw new Error("Failed to fetch events");return s.json()},getEvent:async(t,e)=>{const s=e?`?viewerId=${e}`:"",n=await fetch(`${a}/events/${t}${s}`);if(!n.ok)throw new Error("Failed to fetch event");return n.json()},joinEvent:async(t,e)=>{const s=await fetch(`${a}/events/${t}/join`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e})});if(!s.ok)throw new Error("Failed to join event");return s.json()},leaveEvent:async(t,e)=>{const s=await fetch(`${a}/events/${t}/leave`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e})});if(!s.ok)throw new Error("Failed to leave event");return s.json()},getComments:async t=>{const e=await fetch(`${a}/posts/${t}/comments`);if(!e.ok)throw new Error("Failed to fetch comments");return e.json()}},T=({open:t,onOpenChange:e,children:s})=>(u.useEffect(()=>{const n=l=>{l.key==="Escape"&&e(!1)};return t&&(document.addEventListener("keydown",n),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",n),document.body.style.overflow="unset"}},[t,e]),t?r.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[r.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm transition-opacity",onClick:()=>e(!1)}),s]}):null),O=({children:t,className:e})=>r.jsx("div",{className:p("relative bg-white dark:bg-gray-800 rounded-xl shadow-xl w-full max-w-lg overflow-hidden animate-in fade-in zoom-in-95 duration-200 z-50",e),children:t}),F=({children:t})=>r.jsx("div",{className:"px-6 py-4 border-b dark:border-gray-700",children:t}),U=({children:t})=>r.jsx("h3",{className:"font-semibold text-lg leading-none tracking-tight",children:t}),_=({children:t})=>r.jsx("div",{className:"px-6 py-4 bg-gray-50 dark:bg-gray-900 flex items-center justify-end gap-2",children:t}),q=({isOpen:t,onClose:e,title:s,url:n})=>{const[l,h]=u.useState("choice"),[f,j]=u.useState([]),{conversations:y,addMessage:w}=k(),{user:c}=$(),b=()=>{navigator.clipboard.writeText(n),e(),setTimeout(()=>h("choice"),300)},v=i=>{if(!c)return;const o={id:Date.now().toString(),senderId:c.id,content:`J'ai partagé "${s}" avec vous : ${n}`,timestamp:new Date().toISOString(),isRead:!1,type:"text"};w(i,o),j([...f,i])};return r.jsx(T,{open:t,onOpenChange:i=>!i&&e(),children:r.jsxs(O,{className:"max-w-md",children:[r.jsx(F,{children:r.jsx(U,{children:l==="choice"?"Partager":"Envoyer à..."})}),r.jsx("div",{className:"p-6",children:l==="choice"?r.jsxs("div",{className:"space-y-3",children:[r.jsxs("button",{onClick:b,className:"w-full flex items-center justify-between p-4 rounded-xl border border-gray-100 hover:bg-gray-50 transition-colors group",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"h-10 w-10 rounded-full bg-blue-50 flex items-center justify-center text-blue-600",children:r.jsx(C,{className:"h-5 w-5"})}),r.jsxs("div",{className:"text-left",children:[r.jsx("p",{className:"font-bold text-gray-900",children:"Copier le lien"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Partager via URL"})]})]}),r.jsx(x,{className:"h-4 w-4 text-gray-400 group-hover:translate-x-1 transition-transform"})]}),r.jsxs("button",{onClick:()=>h("chat"),className:"w-full flex items-center justify-between p-4 rounded-xl border border-gray-100 hover:bg-gray-50 transition-colors group",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"h-10 w-10 rounded-full bg-green-50 flex items-center justify-center text-green-600",children:r.jsx(S,{className:"h-5 w-5"})}),r.jsxs("div",{className:"text-left",children:[r.jsx("p",{className:"font-bold text-gray-900",children:"Envoyer en message"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Partager avec vos contacts"})]})]}),r.jsx(x,{className:"h-4 w-4 text-gray-400 group-hover:translate-x-1 transition-transform"})]})]}):r.jsxs("div",{className:"space-y-2",children:[r.jsx("div",{className:"max-h-60 overflow-y-auto space-y-1 mb-4",children:y.length===0?r.jsx("p",{className:"text-center text-sm text-gray-500 py-4",children:"Aucune conversation récente"}):y.map(i=>{const o=i.participants.find(N=>N.id!==(c==null?void 0:c.id)),d=f.includes(i.id);return r.jsxs("div",{className:"flex items-center justify-between p-2 hover:bg-gray-50 rounded-lg transition-colors",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"h-10 w-10 rounded-full bg-blue-100 overflow-hidden flex-shrink-0",children:o!=null&&o.avatarUrl?r.jsx("img",{src:o.avatarUrl,className:"h-full w-full object-cover"}):r.jsx("div",{className:"h-full w-full flex items-center justify-center text-blue-600 font-bold",children:o==null?void 0:o.firstName[0]})}),r.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[o==null?void 0:o.firstName," ",o==null?void 0:o.lastName]})]}),r.jsxs(m,{size:"sm",variant:d?"outline":"default",disabled:d,onClick:()=>v(i.id),className:p("h-8 px-4 rounded-full text-xs font-bold transition-all",d?"bg-white text-green-600 border-green-200":"bg-blue-600 text-white"),children:[d?r.jsx(E,{className:"h-3 w-3 mr-1"}):null,d?"Envoyé":"Envoyer"]})]},i.id)})}),r.jsxs("div",{className:"flex justify-between items-center pt-2",children:[r.jsx(m,{variant:"ghost",size:"sm",onClick:()=>h("choice"),className:"text-gray-500",children:"Retour"}),f.length>0&&r.jsx(m,{size:"sm",onClick:e,className:"bg-gray-900 text-white px-6 rounded-full font-bold",children:"Terminer"})]})]})})]})})};export{x as C,T as D,q as S,O as a,F as b,U as c,L as d,_ as e};
