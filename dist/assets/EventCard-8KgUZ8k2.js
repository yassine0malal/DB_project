import{a as y,r as x,j as e,f as m,B as d,L as k}from"./index-B1TKH03G.js";import{C as N,d as v,e as C}from"./card-yrt95q4Q.js";import{B as S}from"./badge-CpBV-KiU.js";import{u as D}from"./useClubStore-Dc6iDVhX.js";import{S as E}from"./ShareModal-CNKdFKbW.js";import{V as g}from"./video-Dvf87XYw.js";import{M as h}from"./map-pin-C1CkJR1H.js";import{C as M}from"./clock-Cew70h3k.js";import{S as O}from"./share-2-BHjpIwdU.js";import{C as P}from"./check-D4-FbOjS.js";const q=({event:r,clubName:n,vertical:u=!1})=>{const l=new Date(r.date),{toggleParticipation:b}=D(),{user:t}=y(),[f,c]=x.useState(!1),i=t?r.attendees.some(a=>a.id===t.id):!1,p=a=>{const o=a.getTime()-Date.now(),s=Math.ceil(o/(1e3*60*60*24));return s<0?"Terminé":s===0?"Aujourd'hui":s===1?"Demain":`Dans ${s} jours`},[j,w]=x.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsxs(N,{className:m("rounded-xl border bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 shadow dark:border-gray-700 overflow-hidden hover:shadow-lg transition-all duration-300 group",u?"w-full":"min-w-[320px] max-w-[320px]"),children:[e.jsxs("div",{className:"relative h-40 bg-gray-100 dark:bg-gray-900 overflow-hidden",children:[r.coverUrl&&!j?e.jsx("img",{src:r.coverUrl,alt:r.title,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-105",onError:()=>w(!0)}):e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center text-white/50",children:e.jsx($,{date:l})}),e.jsx("div",{className:"absolute top-3 left-3 flex gap-2",children:e.jsxs(S,{variant:r.isOnline?"secondary":"default",className:"bg-white/90 dark:bg-gray-900/90 text-black dark:text-white shadow-sm backdrop-blur-md hover:bg-white dark:hover:bg-gray-900",children:[r.isOnline?e.jsx(g,{className:"w-3 h-3 mr-1"}):e.jsx(h,{className:"w-3 h-3 mr-1"}),r.isOnline?"En ligne":"Présentiel"]})}),e.jsx("div",{className:"absolute bottom-3 right-3 flex gap-2",children:e.jsx("span",{className:"bg-black/60 text-white text-xs font-bold px-2 py-1 rounded-md backdrop-blur-md",children:p(l)})})]}),e.jsxs(v,{className:"p-4 space-y-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"flex justify-between items-start gap-2",children:e.jsx("h4",{className:"font-bold text-lg leading-tight line-clamp-1 text-gray-900 dark:text-gray-100 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors",children:r.title})}),n&&e.jsx("p",{className:"text-sm font-medium text-blue-600 dark:text-blue-400 flex items-center gap-1",children:n})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm text-gray-500 dark:text-gray-400",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(M,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{children:l.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[r.isOnline?e.jsx(g,{className:"h-4 w-4 text-gray-400"}):e.jsx(h,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"truncate",children:r.location})]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-gray-50 dark:border-gray-700/50",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex -space-x-2",children:[r.attendees.slice(0,3).map((a,o)=>{var s;return e.jsx("div",{className:"w-6 h-6 rounded-full bg-blue-100 dark:bg-blue-900/30 border-2 border-white dark:border-gray-800 flex items-center justify-center text-[8px] font-bold text-blue-600 dark:text-blue-400 overflow-hidden shadow-sm",children:a.avatarUrl?e.jsx("img",{src:a.avatarUrl,className:"h-full w-full object-cover"}):(s=a.firstName)==null?void 0:s[0]},a.id||o)}),r.attendees.length>3&&e.jsxs("div",{className:"w-6 h-6 rounded-full bg-gray-100 dark:bg-gray-700 border-2 border-white dark:border-gray-800 flex items-center justify-center text-[8px] font-bold text-gray-500 dark:text-gray-300",children:["+",r.attendees.length-3]})]}),e.jsx("span",{className:"text-xs text-gray-500 font-medium",children:r.attendees.length>0?`${r.attendees.length} participants`:"Soyez le premier !"})]}),e.jsx(d,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 text-gray-400 dark:text-gray-500 hover:text-blue-600 dark:hover:text-blue-400 transition-colors",onClick:a=>{a.preventDefault(),c(!0)},children:e.jsx(O,{className:"h-4 w-4"})})]})]}),e.jsxs(C,{className:"p-4 pt-0 flex flex-wrap gap-2",children:[e.jsx(k,{to:`/events/${r.id}`,className:"flex-1 min-w-[120px]",children:e.jsx(d,{variant:"outline",size:"sm",className:"w-full border-gray-200 dark:border-gray-700 dark:text-gray-200 dark:hover:bg-gray-700",children:"Détails"})}),e.jsxs(d,{size:"sm",className:m("flex-1 min-w-[120px] transition-all duration-300",i?"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-400 border-green-200 dark:border-green-800 hover:bg-green-100 dark:hover:bg-green-900/30":"bg-blue-600 dark:bg-blue-600 hover:bg-blue-700 dark:hover:bg-blue-700 text-white"),onClick:()=>t&&b(r.id,t),children:[i?e.jsx(P,{className:"h-4 w-4 mr-1"}):null,i?"Inscrit":"Participer"]})]})]}),e.jsx(E,{isOpen:f,onClose:()=>c(!1),title:r.title,url:`${window.location.origin}/events/${r.id}`})]})},$=({date:r})=>e.jsxs("div",{className:"text-center bg-white/20 p-2 rounded-lg backdrop-blur-sm text-white",children:[e.jsx("div",{className:"text-xs uppercase font-semibold",children:r.toLocaleString("default",{month:"short"})}),e.jsx("div",{className:"text-2xl font-bold leading-none",children:r.getDate()})]});export{q as E};
