import{a as L,j as e,L as M,U as f,B as g,H as v,r as d}from"./index-B1TKH03G.js";import{I as b}from"./input-CCyB3kA2.js";import{u as N,L as D,T as k,m as O}from"./useGroupStore-Dcy9XBOP.js";import{G as E}from"./globe-CY08mSIG.js";import{G as w}from"./graduation-cap-CM-s4NDS.js";import{H as C}from"./heart-C0FwWlPt.js";import{X as H}from"./x-ChRXEarc.js";import{P as R}from"./plus-IwLfdX6i.js";import{S as B}from"./search-VCfrvYJp.js";import{F as V}from"./filter-Xg0ROrOg.js";const Y=r=>{switch(r){case"friends":return{label:"Amis",icon:C,color:"bg-pink-100 dark:bg-pink-900/30 text-pink-700 dark:text-pink-400"};case"apartment":return{label:"Colocation",icon:v,color:"bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-400"};case"class":return{label:"Promotion",icon:w,color:"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400"};case"club":return{label:"Club",icon:k,color:"bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-400"};default:return{label:"Groupe",icon:f,color:"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300"}}},J=({group:r})=>{const{user:l}=L(),{joinGroup:c,leaveGroup:u}=N(),n=Y(r.type),m=n.icon,o=l&&r.members.some(s=>s.user.id===l.id),x=l&&r.members.some(s=>s.user.id===l.id&&s.role==="admin"),a=s=>{s.preventDefault(),s.stopPropagation(),l&&(o?u(r.id,l.id):c(r.id,l))};return e.jsx(M,{to:`/groups/${r.id}`,children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 overflow-hidden hover:shadow-md transition-all hover:-translate-y-1 group",children:[e.jsxs("div",{className:"h-32 relative overflow-hidden",children:[e.jsx("img",{src:r.coverUrl||"https://images.unsplash.com/photo-1522071820081-009f0129c71c?auto=format&fit=crop&q=80&w=600&h=200",alt:r.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"}),e.jsx("div",{className:"absolute top-2 right-2",children:r.visibility==="private"?e.jsxs("span",{className:"bg-gray-900/70 text-white text-xs px-2 py-1 rounded-full flex items-center gap-1",children:[e.jsx(D,{className:"h-3 w-3"})," PrivÃ©"]}):e.jsxs("span",{className:"bg-green-600/80 text-white text-xs px-2 py-1 rounded-full flex items-center gap-1",children:[e.jsx(E,{className:"h-3 w-3"})," Public"]})}),e.jsx("div",{className:"absolute bottom-2 left-2",children:e.jsxs("span",{className:`text-xs px-2.5 py-1 rounded-full flex items-center gap-1 font-medium ${n.color}`,children:[e.jsx(m,{className:"h-3 w-3"}),n.label]})})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100 truncate",children:r.name}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1 line-clamp-2",children:r.description}),e.jsxs("div",{className:"flex items-center justify-between mt-4",children:[e.jsxs("div",{className:"flex items-center gap-1.5 text-sm text-gray-600 dark:text-gray-400",children:[e.jsx(f,{className:"h-4 w-4"}),e.jsxs("span",{children:[r.members.length," membre",r.members.length>1?"s":""]})]}),!x&&e.jsx(g,{size:"sm",variant:o?"outline":"default",onClick:a,className:o?"text-gray-600 dark:text-gray-400 hover:text-red-600 dark:hover:text-red-400 hover:border-red-300 dark:hover:border-red-800 border-gray-200 dark:border-gray-700 bg-transparent":"bg-blue-600 hover:bg-blue-700 text-white",children:o?"Quitter":"Rejoindre"}),x&&e.jsx("span",{className:"text-xs bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 px-2 py-1 rounded-full",children:"Admin"})]}),r.type==="club"&&r.parentClubName&&e.jsx("div",{className:"mt-3 pt-3 border-t border-gray-100 dark:border-gray-700",children:e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Sous-groupe de ",e.jsx("span",{className:"font-medium text-purple-600 dark:text-purple-400",children:r.parentClubName})]})}),r.type==="class"&&r.major&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-100 dark:border-gray-700 flex gap-2 flex-wrap",children:[r.level&&e.jsx("span",{className:"text-xs bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400 px-2 py-0.5 rounded",children:r.level}),r.major&&e.jsx("span",{className:"text-xs bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400 px-2 py-0.5 rounded truncate max-w-[150px]",children:r.major})]})]})]})})},Q=[{value:"friends",label:"Groupe d'amis",icon:C,description:"Pour vos amis proches"},{value:"apartment",label:"Colocation",icon:v,description:"GÃ©rer votre appartement"},{value:"class",label:"Promotion",icon:w,description:"Votre classe/annÃ©e"},{value:"club",label:"Sous-groupe club",icon:k,description:"Extension d'un club"}],X=({isOpen:r,onClose:l})=>{const{user:c}=L(),{createGroup:u}=N(),[n,m]=d.useState(""),[o,x]=d.useState(""),[a,s]=d.useState("friends"),[i,p]=d.useState("public"),[h,S]=d.useState(""),[G,$]=d.useState("2024-2025"),[I,P]=d.useState(""),[A,T]=d.useState(""),q=t=>{if(t.preventDefault(),!c||!n.trim())return;const j={id:`g${Date.now()}`,name:n.trim(),description:o.trim(),type:a,visibility:i,coverUrl:h||void 0,createdAt:new Date().toISOString(),createdBy:c,members:[{user:c,role:"admin",joinedAt:new Date().toISOString()}],posts:[],rules:[],...a==="class"&&{academicYear:G,major:I,level:A}};u(j),y()},y=()=>{m(""),x(""),s("friends"),p("public"),S(""),$("2024-2025"),P(""),T(""),l()};return r?e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:y}),e.jsxs("div",{className:"relative bg-white rounded-2xl shadow-xl w-full max-w-lg mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-100 px-6 py-4 flex items-center justify-between rounded-t-2xl",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"CrÃ©er un groupe"}),e.jsx("button",{onClick:y,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:e.jsx(H,{className:"h-5 w-5 text-gray-500"})})]}),e.jsxs("form",{onSubmit:q,className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nom du groupe *"}),e.jsx(b,{value:n,onChange:t=>m(t.target.value),placeholder:"Ex: Squad Informatique ðŸ”¥",className:"w-full",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),e.jsx("textarea",{value:o,onChange:t=>x(t.target.value),placeholder:"DÃ©crivez votre groupe...",className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",rows:3})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Type de groupe"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:Q.map(({value:t,label:j,icon:U,description:F})=>e.jsxs("button",{type:"button",onClick:()=>s(t),className:`p-3 rounded-xl border-2 text-left transition-all ${a===t?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:[e.jsx(U,{className:`h-5 w-5 mb-1 ${a===t?"text-blue-600":"text-gray-500"}`}),e.jsx("p",{className:`font-medium text-sm ${a===t?"text-blue-900":"text-gray-900"}`,children:j}),e.jsx("p",{className:"text-xs text-gray-500",children:F})]},t))})]}),a==="class"&&e.jsxs("div",{className:"space-y-4 p-4 bg-blue-50 rounded-xl",children:[e.jsx("p",{className:"text-sm font-medium text-blue-800",children:"Informations acadÃ©miques"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Niveau"}),e.jsx(b,{value:A,onChange:t=>T(t.target.value),placeholder:"Ex: M1, L3...",className:"bg-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"AnnÃ©e acadÃ©mique"}),e.jsx(b,{value:G,onChange:t=>$(t.target.value),placeholder:"2024-2025",className:"bg-white"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"FiliÃ¨re"}),e.jsx(b,{value:I,onChange:t=>P(t.target.value),placeholder:"Ex: GÃ©nie Informatique",className:"bg-white"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"VisibilitÃ©"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{type:"button",onClick:()=>p("public"),className:`flex-1 p-3 rounded-xl border-2 flex items-center gap-2 transition-all ${i==="public"?"border-green-500 bg-green-50":"border-gray-200 hover:border-gray-300"}`,children:[e.jsx(E,{className:`h-5 w-5 ${i==="public"?"text-green-600":"text-gray-500"}`}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:`font-medium text-sm ${i==="public"?"text-green-900":"text-gray-900"}`,children:"Public"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Tout le monde peut voir"})]})]}),e.jsxs("button",{type:"button",onClick:()=>p("private"),className:`flex-1 p-3 rounded-xl border-2 flex items-center gap-2 transition-all ${i==="private"?"border-gray-700 bg-gray-50":"border-gray-200 hover:border-gray-300"}`,children:[e.jsx(D,{className:`h-5 w-5 ${i==="private"?"text-gray-700":"text-gray-500"}`}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-medium text-sm text-gray-900",children:"PrivÃ©"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Sur invitation"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Image de couverture (URL)"}),e.jsx(b,{value:h,onChange:t=>S(t.target.value),placeholder:"https://...",className:"w-full"})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx(g,{type:"button",variant:"outline",onClick:y,className:"flex-1",children:"Annuler"}),e.jsx(g,{type:"submit",className:"flex-1 bg-blue-600 hover:bg-blue-700",children:"CrÃ©er le groupe"})]})]})]})]}):null},z=[{value:"all",label:"Tous",icon:f},{value:"friends",label:"Amis",icon:C},{value:"apartment",label:"Colocation",icon:v},{value:"class",label:"Promotion",icon:w},{value:"club",label:"Clubs",icon:k}],oe=()=>{const{groups:r,filters:l,setFilter:c,getFilteredGroups:u,setGroups:n}=N(),[m,o]=d.useState(!1),x=u();return d.useEffect(()=>{r.length===0&&n(O)},[r.length,n]),e.jsxs("div",{className:"max-w-7xl mx-auto space-y-8 pb-10",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:"Mes Groupes"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:"CrÃ©ez et rejoignez des groupes pour collaborer et Ã©changer."})]}),e.jsxs(g,{onClick:()=>o(!0),className:"bg-blue-600 hover:bg-blue-700 flex items-center gap-2",children:[e.jsx(R,{className:"h-4 w-4"}),"CrÃ©er un groupe"]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 flex flex-col md:flex-row gap-4 items-center transition-colors",children:[e.jsxs("div",{className:"relative flex-1 w-full",children:[e.jsx(B,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400 dark:text-gray-500"}),e.jsx(b,{placeholder:"Rechercher un groupe...",className:"pl-9 bg-gray-50 dark:bg-gray-900 border-transparent focus:bg-white dark:focus:bg-gray-800 dark:text-gray-100 placeholder:text-gray-400 dark:placeholder:text-gray-500 transition-all border-none",value:l.search,onChange:a=>c("search",a.target.value)})]}),e.jsx("div",{className:"flex gap-2 w-full md:w-auto overflow-x-auto pb-2 md:pb-0 scrollbar-hide",children:z.map(({value:a,label:s,icon:i})=>e.jsxs(g,{variant:l.type===a?"default":"ghost",size:"sm",onClick:()=>c("type",a),className:`flex items-center gap-1.5 whitespace-nowrap ${l.type===a?"bg-gray-900 dark:bg-gray-100 text-white dark:text-gray-900 hover:bg-gray-800 dark:hover:bg-gray-200":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[e.jsx(i,{className:"h-4 w-4"}),s]},a))})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:z.slice(1).map(({value:a,label:s,icon:i})=>{const p=r.filter(h=>h.type===a).length;return e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-xl border border-gray-100 dark:border-gray-700 flex items-center gap-3 transition-colors",children:[e.jsx("div",{className:`p-2 rounded-lg ${a==="friends"?"bg-pink-100 dark:bg-pink-900/30 text-pink-600 dark:text-pink-400":a==="apartment"?"bg-amber-100 dark:bg-amber-900/30 text-amber-600 dark:text-amber-400":a==="class"?"bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400":"bg-purple-100 dark:bg-purple-900/30 text-purple-600 dark:text-purple-400"}`,children:e.jsx(i,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:p}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:s})]})]},a)})}),x.length>0?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:x.map(a=>e.jsx(J,{group:a},a.id))}):e.jsxs("div",{className:"text-center py-20 bg-gray-50 dark:bg-gray-800/50 rounded-xl border border-dashed border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-full inline-block shadow-sm mb-4",children:e.jsx(V,{className:"h-8 w-8 text-gray-400 dark:text-gray-500"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100",children:"Aucun groupe trouvÃ©"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:"Essayez de modifier vos filtres ou crÃ©ez un nouveau groupe."}),e.jsx(g,{onClick:()=>o(!0),className:"mt-4 bg-blue-600 hover:bg-blue-700",children:"CrÃ©er mon premier groupe"})]}),e.jsx(X,{isOpen:m,onClose:()=>o(!1)})]})};export{oe as GroupListPage};
