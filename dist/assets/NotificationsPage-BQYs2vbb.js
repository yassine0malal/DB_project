import{c as j,i as u,j as e,k as N,B as m,S as y,f as h,L as k,C as w,U as C}from"./index-B1TKH03G.js";import{B as D}from"./badge-CpBV-KiU.js";import{c as x,D as S,a as g,T as A,f as z}from"./dropdown-menu-l-4mx64D.js";import{C as M}from"./check-D4-FbOjS.js";import{M as R}from"./more-horizontal-Djog7VHv.js";import{G as T}from"./graduation-cap-CM-s4NDS.js";import{s as b,a as p,f as L}from"./fr-C6hzHdjj.js";import{t as O,c as B}from"./en-US-Bnkcyeeb.js";import{S as I}from"./search-VCfrvYJp.js";/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=j("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=j("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);function q(s,a){const t=O(s);return isNaN(a)?B(s,NaN):(t.setDate(t.getDate()+a),t)}function v(s,a){const t=b(s),r=b(a);return+t==+r}function F(s,a,t){const r=p(s,t),c=p(a,t);return+r==+c}function H(s,a){return F(s,x(s),a)}function P(s){return v(s,x(s))}function E(s,a){return q(s,-1)}function G(s){return v(s,E(x(s)))}const V=()=>{const{markAllAsRead:s}=u();return e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[e.jsx(N,{className:"h-6 w-6 text-blue-600"}),"Notifications"]}),e.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Restez informé de toutes vos activités"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(m,{variant:"outline",size:"sm",onClick:s,className:"gap-2",children:[e.jsx(U,{className:"h-4 w-4"}),"Tout marquer comme lu"]}),e.jsx(m,{variant:"ghost",size:"sm",className:"h-9 w-9 p-0 text-gray-400 hover:text-gray-600",children:e.jsx(y,{className:"h-5 w-5"})})]})]})},$=()=>{const{filter:s,setFilter:a,getUnreadCount:t}=u(),r=t(),c=[{label:"Toutes",value:"all"},{label:"Non-lues",value:"unread",count:r},{label:"Mentions",value:"mentions"}];return e.jsx("div",{className:"flex gap-2 pb-4 overflow-x-auto scrollbar-hide border-b border-gray-100 mb-4",children:c.map(l=>e.jsxs(m,{variant:s===l.value?"default":"ghost",size:"sm",onClick:()=>a(l.value),className:"rounded-full gap-2",children:[l.label,l.count!==void 0&&l.count>0&&e.jsx(D,{variant:"secondary",className:"px-1.5 py-0 h-5 min-w-[1.25rem] bg-blue-100 text-blue-700 hover:bg-blue-200 border-none",children:l.count})]},l.value))})},f=({type:s,size:a="md"})=>{const t=a==="sm"?"h-3 w-3":"h-5 w-5",r=a==="sm"?"p-1":"p-2",c=()=>{switch(s){case"club":return"bg-purple-100 dark:bg-purple-900/30 text-purple-600 dark:text-purple-400";case"event":return"bg-orange-100 dark:bg-orange-900/30 text-orange-600 dark:text-orange-400";case"academic":return"bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400";default:return"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400"}},l=()=>{switch(s){case"club":return e.jsx(C,{className:t});case"event":return e.jsx(w,{className:t});case"academic":return e.jsx(T,{className:t});default:return e.jsx(W,{className:t})}};return e.jsx("div",{className:`${c()} ${r} rounded-full`,children:e.jsx(l,{})})},Q=({notification:s})=>{var r;const{markAsRead:a,deleteNotification:t}=u();return e.jsx("div",{className:h("group relative p-4 rounded-xl transition-all duration-200 hover:bg-gray-50 dark:hover:bg-gray-800 border border-transparent hover:border-gray-100 dark:hover:border-gray-700",!s.isRead&&"bg-blue-50/50 dark:bg-blue-900/20 hover:bg-blue-50 dark:hover:bg-blue-900/30 border-blue-100/50 dark:border-blue-800/50"),children:e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"shrink-0",children:(r=s.sender)!=null&&r.avatarUrl?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:s.sender.avatarUrl,alt:"",className:"h-10 w-10 rounded-full object-cover"}),e.jsx("div",{className:"absolute -bottom-1 -right-1 shadow-sm rounded-full bg-white dark:bg-gray-800 p-[2px]",children:e.jsx(f,{type:s.type,size:"sm"})})]}):e.jsx(f,{type:s.type})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex justify-between items-start gap-2",children:[e.jsxs(k,{to:s.link||"#",onClick:()=>a(s.id),className:"block",children:[e.jsx("p",{className:h("text-sm font-medium text-gray-900 dark:text-gray-100",!s.isRead&&"font-bold text-black dark:text-white"),children:s.title}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-0.5 line-clamp-2",children:s.message})]}),e.jsxs(S,{trigger:e.jsx(m,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(R,{className:"h-4 w-4 text-gray-400 dark:text-gray-500"})}),children:[e.jsx(g,{onClick:()=>a(s.id),children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(M,{className:"h-4 w-4 mr-2"}),"Marquer comme lu"]})}),e.jsx(g,{onClick:()=>t(s.id),destructive:!0,children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(A,{className:"h-4 w-4 mr-2"}),"Supprimer"]})})]})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx("span",{className:"text-xs text-gray-400 dark:text-gray-500",children:z(new Date(s.createdAt),{addSuffix:!0,locale:L})}),!s.isRead&&e.jsx("span",{className:"h-2 w-2 rounded-full bg-blue-600"})]})]})]})})},te=()=>{const{getFilteredNotifications:s,searchQuery:a,filter:t}=u(),r=s(),c=r.reduce((n,i)=>{const o=new Date(i.createdAt);let d="Plus ancien";return P(o)?d="Aujourd'hui":G(o)?d="Hier":H(o)&&(d="Cette semaine"),n[d]||(n[d]=[]),n[d].push(i),n},{}),l=["Aujourd'hui","Hier","Cette semaine","Plus ancien"];return e.jsxs("div",{className:"max-w-2xl mx-auto pb-20",children:[e.jsx(V,{}),e.jsx($,{}),e.jsx("div",{className:"space-y-8",children:r.length>0?l.map(n=>{const i=c[n];return!i||i.length===0?null:e.jsxs("div",{className:"animate-in fade-in slide-in-from-bottom-4 duration-500",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-500 mb-3 ml-1 uppercase tracking-wider",children:n}),e.jsx("div",{className:"space-y-1",children:i.map(o=>e.jsx(Q,{notification:o},o.id))})]},n)}):e.jsxs("div",{className:"text-center py-20 bg-gray-50 rounded-xl border border-dashed border-gray-200 mt-8",children:[e.jsx("div",{className:"bg-white p-4 rounded-full inline-block shadow-sm mb-4",children:a?e.jsx(I,{className:"h-8 w-8 text-gray-400"}):e.jsx(N,{className:"h-8 w-8 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:a?"Aucun résultat":"Aucune notification"}),e.jsx("p",{className:"text-gray-500 max-w-xs mx-auto mt-1",children:a?"Essayez d'autres termes de recherche.":t==="unread"?"Vous avez tout lu ! C'est calme pour le moment.":"Vous n'avez pas encore de notifications."})]})})]})};export{te as NotificationsPage};
